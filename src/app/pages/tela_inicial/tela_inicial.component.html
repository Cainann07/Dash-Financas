<div class="div-principal">
    <aside class="sidebar">
        <img class="logo-sidebar" src="assets/wmremove-transformed-removebg-preview - Editado.png" alt="">
        <ul>

            <li><a href=""><span class="material-symbols-outlined">
                        home
                    </span>
                    Tela Inicial</a>
            </li>
            <li><a href=""><span class="material-symbols-outlined">settings</span>
                    Configurações</a>
            </li>
            <li><a href=""><span class="material-symbols-outlined">
                        logout
                    </span>
                    Logout</a>
            </li>
        </ul>
    </aside>
    <main>
        <div class="stepper">
            <div class="inicio">
                <h1>Vamos Começar!</h1>
            </div>

            <div class="card flex justify-center">
                <p-stepper [value]="1" class="basis-[50rem]" [linear]="true">
                    <p-step-list>
                        <p-step [value]="1">Seu orçamento</p-step>
                        <p-step [value]="2">Gastos Mensais</p-step>
                        <p-step [value]="3">Resumo</p-step>
                    </p-step-list>
                    <p-step-panels>
                        <p-step-panel [value]="1">
                            <ng-template #content let-activateCallback="activateCallback">
                                <div class="flex flex-col h-48">
                                    <div
                                        class="border-2 border-dashed border-surface-200 dark:border-surface-700 rounded bg-surface-50 dark:bg-surface-950 flex-auto flex justify-center items-center font-medium">
                                        <div class="conteudo-stepper1">
                                            <p>Insira o seu orçamento mensal:</p>
                                            <p-inputnumber [(ngModel)]="orcamento_input" inputId="minmax" mode="decimal"
                                                [min]="0" />

                                        </div>

                                    </div>
                                </div>
                                <div class="flex pt-6 justify-end">
                                    <p-button label="Avançar" icon="pi pi-arrow-right" iconPos="right"
                                        (onClick)="activateCallback(2)" [disabled]="!(orcamento_input > 0)" />
                                </div>
                            </ng-template>
                        </p-step-panel>

                        <p-step-panel [value]="2">
                            <ng-template #content let-activateCallback="activateCallback">
                                <div class="flex flex-col h-48">
                                    <!-- <div
                                        class="border-2 border-dashed border-surface-200 dark:border-surface-700 rounded bg-surface-50 dark:bg-surface-950 flex-auto flex justify-center items-center font-medium">
                                        <h2>Informe seus gastos mensais. (Um de cada vez)</h2>
                                        <p>Com base nos seus gastos informados lhe retornaremos uma visão geral de
                                            suas despesas.</p>
                                        <div class="conteudo-stepper2">
                                            <input type="text" pInputText [(ngModel)]="gasto_mensal" />
                                            <p-button label="Adicionar" icon="pi pi-plus" size="small"
                                            severity="success" />
                                        </div>
                                    </div> -->
                                    <div
                                        class="border-2 border-dashed border-surface-200 rounded p-4 flex flex-column align-items-center">

                                        <h2>Informe seus gastos mensais</h2>
                                        <p class="mb-4">Adicione suas despesas fixas (Aluguel, Internet, Academia, etc).
                                        </p>

                                        <div class="conteudo-stepper2 flex gap-2 align-items-center">

                                            <input type="text" pInputText [(ngModel)]="tempGastoNome"
                                                placeholder="Nome (Ex: Luz)" />

                                            <p-inputNumber [(ngModel)]="tempGastoValor" mode="currency" currency="BRL"
                                                locale="pt-BR" placeholder="R$ 0,00">
                                            </p-inputNumber>

                                            <p-button icon="pi pi-plus" (onClick)="adicionarGastoNaLista()"
                                                severity="success" [disabled]="!tempGastoNome || !tempGastoValor">
                                            </p-button>

                                        </div>

                                        <div *ngIf="listaGastosIniciais.length > 0" id="tabela-gastos"
                                            class="mt-4 w-full" style="max-width: 500px; margin-bottom: 5rem;">
                                            <p-table [value]="listaGastosIniciais" size="small"
                                                [tableStyle]="{'min-width': '20rem'}">
                                                <ng-template pTemplate="header">
                                                    <tr>
                                                        <th>Gasto</th>
                                                        <th>Valor</th>
                                                        <th style="width: 3rem"></th>
                                                    </tr>
                                                </ng-template>
                                                <ng-template pTemplate="body" let-gasto let-i="rowIndex">
                                                    <tr>
                                                        <td>{{ gasto.nome }}</td>
                                                        <td class="font-bold text-red-500">
                                                            - {{ gasto.valor | currency:'BRL' }}
                                                        </td>
                                                        <td>
                                                            <p-button icon="pi pi-trash" [text]="true" severity="danger"
                                                                (onClick)="removerGasto(i)"></p-button>
                                                        </td>
                                                    </tr>
                                                </ng-template>
                                            </p-table>
                                        </div>


                                    </div>
                                    <div class="flex pt-6 justify-between">
                                        <p-button label="Voltar" severity="secondary" icon="pi pi-arrow-left"
                                            (onClick)="activateCallback(1)" />
                                        <p-button label="Avançar" icon="pi pi-arrow-right" iconPos="right"
                                            (onClick)="activateCallback(3)"
                                            [disabled]="!(listaGastosIniciais.length > 0)" />
                                    </div>
                                </div>
                            </ng-template>
                        </p-step-panel>

                        <p-step-panel [value]="3">
                            <ng-template #content let-activateCallback="activateCallback">
                                <div class="card-clean">

                                    <div class="header-clean">
                                        <h2 class="titulo-principal">Revisão</h2>

                                        <div class="grupo-botoes">
                                            <p-button label="Voltar" icon="pi pi-arrow-left"
                                                styleClass="p-button-text p-button-secondary"
                                                (onClick)="activateCallback(1)">
                                            </p-button>
                                            <p-button label="Confirmar" icon="pi pi-check"
                                                styleClass="p-button-rounded p-button-success"
                                                (onClick)="finalizarSetup()">
                                            </p-button>
                                        </div>
                                    </div>

                                    <div class="grid-cards">

                                        <div class="card-valor item-renda">
                                            <span class="label">Sua Renda</span>
                                            <span class="valor">{{ orcamento_input | currency:'BRL' }}</span>
                                            <i class="pi pi-wallet icone-fundo"></i>
                                        </div>

                                        <div class="card-valor item-gasto">
                                            <span class="label">Total Gastos</span>
                                            <span class="valor text-red-600">- {{ totalGastos | currency:'BRL' }}</span>
                                            <i class="pi pi-shopping-bag icone-fundo"></i>
                                        </div>

                                        <div class="card-valor item-saldo"
                                            [ngClass]="saldoFinal >= 0 ? 'bg-verde' : 'bg-vermelho'">
                                            <span class="label">Saldo Final</span>
                                            <span class="valor" [style.color]="saldoFinal >= 0 ? '#166534' : '#991b1b'">
                                                {{ saldoFinal | currency:'BRL' }}
                                            </span>
                                            <i class="pi pi-chart-line icone-fundo"></i>
                                        </div>

                                    </div>

                                    <div class="area-tabela">
                                        <h4 class="titulo-tabela">Detalhamento</h4>

                                        <p-table [value]="listaGastosIniciais" [scrollable]="true" scrollHeight="flex"
                                            styleClass="p-datatable-sm">

                                            <ng-template pTemplate="body" let-gasto>
                                                <tr class="linha-tabela">
                                                    <td style="width: 70%">
                                                        <span class="nome-gasto">{{ gasto.nome }}</span>
                                                    </td>
                                                    <td style="width: 30%; text-align: right;">
                                                        <span class="valor-gasto">- {{ gasto.valor | currency:'BRL'
                                                            }}</span>
                                                    </td>
                                                </tr>
                                            </ng-template>
                                        </p-table>
                                    </div>

                                </div>
                            </ng-template>
                        </p-step-panel>
                    </p-step-panels>
                </p-stepper>
            </div>
        </div>

    </main>

</div>