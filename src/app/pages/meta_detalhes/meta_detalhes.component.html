<div class="pagina-detalhe fade-in" [ngClass]="meta.classe">

    <header class="cabecalho">
        <button pButton icon="pi pi-arrow-left" label="Voltar" class="btn-voltar" (click)="voltar()"></button>
        <h2>Detalhes do Objetivo</h2>
    </header>

    <main class="card-cofre">
        <div class="icone-destaque">
            <i class="pi" [ngClass]="meta.icone"></i>
        </div>

        <h1 class="titulo-meta">{{ meta.nome }}</h1>

        <div class="valores-meta">
            <span class="valor-atual">{{ meta.atual | currency:'BRL' }}</span>
            <span class="valor-alvo">meta: {{ meta.alvo | currency:'BRL' }}</span>
        </div>

        <div class="area-progresso">
            <div class="textos-progresso">
                <span>{{ meta.progresso }}% Concluído</span>
                <span>Faltam {{ (meta.alvo - meta.atual) | currency:'BRL' }}</span>
            </div>
            <p-progressBar [value]="meta.progresso" styleClass="barra-customizada" [showValue]="false"></p-progressBar>
        </div>

        <div class="acoes">
            <button pButton label="Guardar Dinheiro" icon="pi pi-plus" class="btn-guardar"
                (click)="abrirCofre()"></button>
        </div>
    </main>

    <section class="historico">
        <h3>Histórico</h3>
        <p-table [value]="meta.historico" styleClass="tabela-clean">
            <ng-template pTemplate="header">
                <tr>
                    <th>Data</th>
                    <th>Tipo</th>
                    <th class="text-right">Valor</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-item>
                <tr>
                    <td class="text-gray">{{ item.data }}</td>
                    <td>Aplicação</td>
                    <td class="text-right valor-positivo">+ {{ item.valor | currency:'BRL' }}</td>
                </tr>
            </ng-template>
        </p-table>
    </section>

    <p-dialog header="Adicionar ao Cofre" [(visible)]="exibirModal" [modal]="true" [style]="{width: '400px'}">
        <div class="p-fluid">
            <p class="mb-3">Quanto você quer guardar hoje?</p>
            <p-inputNumber [(ngModel)]="valorDeposito" mode="currency" currency="BRL" locale="pt-BR"></p-inputNumber>
        </div>
        <ng-template pTemplate="footer">
            <button pButton label="Cancelar" class="p-button-text text-gray-600" (click)="exibirModal = false"></button>
            <button pButton label="Confirmar" class="btn-confirmar" (click)="confirmarDeposito()"></button>
        </ng-template>
    </p-dialog>

</div>